(function(a){a.fn.WireTabs=function(c){var d={rememberTabs:0,cookieName:"WireTabs",items:null,skipRememberTabIDs:[],itemsParent:null,id:""};if(ProcessWire.config.JqueryWireTabs.rememberTabs!="undefined"){d.rememberTabs=ProcessWire.config.JqueryWireTabs.rememberTabs}var b=0;a.extend(d,c);return this.each(function(i){var k=null;var e=a(this);var h="";var m=true;function n(){if(!d.items){return}if(d.items.length<1){return}if(d.id.length){k=a("#"+d.id);if(k.length){m=false}else{k=null}}if(!k){k=a("<ul></ul>").addClass("WireTabs nav");if(d.id.length){k.attr("id",d.id)}}d.items.each(f);if(m){e.prepend(k)}var p=e;var s=null;var u=l();if(d.rememberTabs==0){p.submit(function(){g(h);return true})}var o=window.location.href;var q="";if(o.indexOf("WireTab")){var r=new RegExp("[&;?]WireTab=([-_a-z0-9]+)","i");q=o.match(r);q=q?q[1]:"";if(q.length){s=k.find("a#_"+q)}}if(s==null){var t=document.location.hash.replace("#","");if(t.length){s=k.find("a#_"+t);if(s.length==0){s=null}else{document.location.hash=""}}}if(s==null&&u.length>0&&d.rememberTabs>-1){s=k.find("a#_"+u)}if(s&&s.length>0){s.click();if(d.rememberTabs==0){g("")}setTimeout(function(){s.click()},200)}else{k.children("li:first").children("a").click()}}function f(){b++;var s=a(this);if(!s.attr("id")){s.attr("id","WireTab"+b)}var r=s.attr("title")||s.attr("id");s.removeAttr("title");var o=s.attr("id");var q=a("a#_"+o);if(q.length>0){q.click(j)}else{var q=a("<a></a>").attr("href","#"+o).attr("id","_"+o).html(r).click(j);k.append(a("<li></li>").append(q))}var p=s.attr("data-tooltip");if(s.hasClass("WireTabTip")||p){q.addClass("tooltip");q.attr("title",p?p:r)}s.hide()}function j(){var o=a(k.find("a.on").removeClass("on").attr("href")).hide();var p=a(a(this).addClass("on").attr("href")).show();var q=p.attr("id");var r=o.attr("id");if(r){e.removeClass(o.attr("id"))}e.addClass(q);if(d.rememberTabs>-1){if(jQuery.inArray(q,d.skipRememberTabIDs)!=-1){q=""}if(d.rememberTabs==1){g(q)}h=q}a(document).trigger("wiretabclick",[p,o]);return false}function g(o){document.cookie=d.cookieName+"="+escape(o)}function l(){var p=new RegExp("(?:^|;)\\s?"+d.cookieName+"=(.*?)(?:;|$)","i");var o=document.cookie.match(p);o=o?o[1]:"";return o}n()})}})(jQuery);